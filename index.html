<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Хомяк Кликер</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap">
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            -webkit-tap-highlight-color: transparent;
            touch-action: manipulation;
            user-select: none;
        }
        
        html, body {
            width: 100%;
            height: 100%;
            overflow: hidden;
            position: fixed;
        }
        
        body {
            font-family: 'Press Start 2P', cursive;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            color: #f1f1f1;
            padding: 20px;
            text-align: center;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        header {
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 4px solid #ff9a00;
        }
        
        h1 {
            color: #ff9a00;
            font-size: 2.5rem;
            text-shadow: 3px 3px 0 #000;
            margin-bottom: 10px;
        }
        
        .stats {
            background: rgba(0, 0, 0, 0.7);
            border: 4px solid #444;
            border-radius: 15px;
            padding: 15px;
            margin-bottom: 20px;
        }
        
        .counter {
            font-size: 2.5rem;
            color: #4cd137;
            margin-bottom: 10px;
        }
        
        .cps {
            font-size: 1rem;
            color: #00cec9;
        }
        
        .game-area {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .hamster-container {
            flex: 1;
            min-width: 350px;
        }
        
        .hamster {
            width: 350px;
            height: 350px;
            background: #553c13;
            border-radius: 50%;
            margin: 0 auto;
            position: relative;
            cursor: pointer;
            border: 10px solid #8b5a2b;
            box-shadow: 
                inset 0 0 40px rgba(0,0,0,0.7),
                0 15px 40px rgba(0,0,0,0.8);
            overflow: hidden;
            touch-action: manipulation;
        }
        
        .hamster:active {
            transform: scale(0.97);
        }
        
        .hamster-face {
            position: absolute;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
        }
        
        .eye {
            position: absolute;
            width: 40px;
            height: 50px;
            background: white;
            border-radius: 50%;
            top: 90px;
        }
        
        .eye.left { left: 100px; }
        .eye.right { right: 100px; }
        
        .pupil {
            position: absolute;
            width: 20px;
            height: 25px;
            background: black;
            border-radius: 50%;
            top: 12px;
            left: 10px;
        }
        
        .nose {
            position: absolute;
            width: 50px;
            height: 30px;
            background: #ff6b8b;
            border-radius: 50%;
            top: 150px;
            left: 50%;
            transform: translateX(-50%);
        }
        
        .mouth {
            position: absolute;
            width: 70px;
            height: 30px;
            border-bottom: 10px solid #442211;
            border-radius: 0 0 40px 40px;
            top: 180px;
            left: 50%;
            transform: translateX(-50%);
        }
        
        .ear {
            position: absolute;
            width: 60px;
            height: 50px;
            background: #8b5a2b;
            border-radius: 50%;
            top: 40px;
        }
        
        .ear.left { left: 90px; }
        .ear.right { right: 90px; }
        
        .click-effect {
            position: absolute;
            width: 60px;
            height: 60px;
            background: radial-gradient(circle, rgba(255,255,150,0.9) 0%, rgba(255,200,50,0) 70%);
            border-radius: 50%;
            pointer-events: none;
            animation: clickAnim 0.4s forwards;
        }
        
        @keyframes clickAnim {
            0% { transform: scale(0.5); opacity: 1; }
            100% { transform: scale(3); opacity: 0; }
        }
        
        .upgrades {
            flex: 2;
            min-width: 350px;
            background: rgba(0, 0, 0, 0.7);
            border: 4px solid #444;
            border-radius: 15px;
            padding: 15px;
            max-height: 400px;
            overflow-y: auto;
        }
        
        .upgrades h2 {
            color: #ff9a00;
            margin-bottom: 15px;
            font-size: 1.2rem;
        }
        
        .upgrade {
            background: #333;
            border: 3px solid #555;
            border-radius: 10px;
            padding: 12px;
            margin-bottom: 10px;
            cursor: pointer;
            transition: all 0.2s;
            text-align: left;
        }
        
        .upgrade:hover {
            background: #444;
            border-color: #ff9a00;
        }
        
        .upgrade.unavailable {
            opacity: 0.5;
            cursor: not-allowed;
        }
        
        .upgrade.unavailable:hover {
            background: #333;
            border-color: #555;
        }
        
        .upgrade-name {
            color: #ff9a00;
            margin-bottom: 5px;
            font-size: 0.9rem;
        }
        
        .upgrade-description {
            color: #ccc;
            font-size: 0.7rem;
            margin-bottom: 8px;
        }
        
        .upgrade-price {
            color: #4cd137;
            font-size: 0.8rem;
        }
        
        .upgrade-owned {
            color: #00cec9;
            font-size: 0.7rem;
            margin-top: 5px;
        }
        
        .controls {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 20px;
        }
        
        button {
            font-family: 'Press Start 2P', cursive;
            background: #ff9a00;
            color: #000;
            border: none;
            border-radius: 10px;
            padding: 12px 20px;
            font-size: 0.9rem;
            cursor: pointer;
            transition: all 0.2s;
            border: 3px solid #cc7a00;
        }
        
        button:hover {
            background: #ffaa20;
            transform: translateY(-2px);
        }
        
        button:active {
            transform: translateY(1px);
        }
        
        button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        
        .save-notice {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: rgba(0, 0, 0, 0.8);
            padding: 10px;
            border-radius: 10px;
            font-size: 0.7rem;
            color: #4cd137;
            opacity: 0;
            transition: opacity 0.3s;
        }
        
        @media (max-width: 768px) {
            .hamster {
                width: 280px;
                height: 280px;
            }
            
            .eye.left { left: 80px; }
            .eye.right { right: 80px; }
            
            .ear.left { left: 70px; }
            .ear.right { right: 70px; }
            
            h1 {
                font-size: 1.8rem;
            }
            
            .counter {
                font-size: 2rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>ХОМЯК КЛИКЕР</h1>
            <p>Кликай на хомяка, чтобы зарабатывать зерна!</p>
        </header>
        
        <div class="stats">
            <div class="counter">0 зерен</div>
            <div class="cps">0 зерен/сек</div>
        </div>
        
        <div class="game-area">
            <div class="hamster-container">
                <div class="hamster" id="hamster">
                    <div class="hamster-face">
                        <div class="ear left"></div>
                        <div class="ear right"></div>
                        <div class="eye left">
                            <div class="pupil"></div>
                        </div>
                        <div class="eye right">
                            <div class="pupil"></div>
                        </div>
                        <div class="nose"></div>
                        <div class="mouth"></div>
                    </div>
                </div>
                <p>КЛИКАЙ СЮДА!</p>
            </div>
            
            <div class="upgrades">
                <h2>УЛУЧШЕНИЯ</h2>
                <div id="upgrades-list"></div>
            </div>
        </div>
        
        <div class="controls">
            <button id="save-btn">Сохранить</button>
            <button id="reset-btn">Сбросить</button>
        </div>
        
        <div class="save-notice" id="save-notice">Игра сохранена!</div>
    </div>

    <script>
        // Игровые переменные
        let grains = 0;
        let grainsPerClick = 1;
        let grainsPerSecond = 0;
        let upgrades = {
            autoClicker: { level: 0, cost: 10, multiplier: 1 },
            doubleClick: { level: 0, cost: 50, multiplier: 2 },
            goldenHamster: { level: 0, cost: 200, multiplier: 3 },
            hamsterWheel: { level: 0, cost: 500, multiplier: 5 },
            hamsterFarm: { level: 0, cost: 2000, multiplier: 10 }
        };
        
        // DOM элементы
        const hamster = document.getElementById('hamster');
        const counter = document.querySelector('.counter');
        const cpsDisplay = document.querySelector('.cps');
        const upgradesList = document.getElementById('upgrades-list');
        const saveBtn = document.getElementById('save-btn');
        const resetBtn = document.getElementById('reset-btn');
        const saveNotice = document.getElementById('save-notice');
        
        // Форматирование чисел
        function formatNumber(num) {
            if (num >= 1000000) {
                return (num / 1000000).toFixed(1) + 'M';
            }
            if (num >= 1000) {
                return (num / 1000).toFixed(1) + 'K';
            }
            return Math.floor(num);
        }
        
        // Обновление отображения
        function updateDisplay() {
            counter.textContent = formatNumber(grains) + ' зерен';
            cpsDisplay.textContent = formatNumber(grainsPerSecond) + ' зерен/сек';
        }
        
        // Создание эффекта клика
        function createClickEffect(x, y) {
            const effect = document.createElement('div');
            effect.className = 'click-effect';
            effect.style.left = (x - 30) + 'px';
            effect.style.top = (y - 30) + 'px';
            hamster.appendChild(effect);
            
            setTimeout(() => {
                effect.remove();
            }, 400);
        }
        
        // Обработчик клика по хомяку
        hamster.addEventListener('click', (e) => {
            const rect = hamster.getBoundingClientRect();
            const x = e.clientX - rect.left;
            const y = e.clientY - rect.top;
            
            grains += grainsPerClick;
            createClickEffect(x, y);
            updateDisplay();
            
            // Анимация хомяка
            hamster.style.transform = 'scale(0.97)';
            setTimeout(() => {
                hamster.style.transform = 'scale(1)';
            }, 100);
        });
        
        // Обработчик для тач-устройств (предотвращает зум)
        hamster.addEventListener('touchstart', (e) => {
            if (e.touches.length === 1) {
                const touch = e.touches[0];
                const rect = hamster.getBoundingClientRect();
                const x = touch.clientX - rect.left;
                const y = touch.clientY - rect.top;
                
                grains += grainsPerClick;
                createClickEffect(x, y);
                updateDisplay();
                
                hamster.style.transform = 'scale(0.97)';
                setTimeout(() => {
                    hamster.style.transform = 'scale(1)';
                }, 100);
            }
            e.preventDefault();
        }, { passive: false });
        
        // Создание улучшений
        function createUpgrades() {
            upgradesList.innerHTML = '';
            
            const upgradeData = [
                {
                    id: 'autoClicker',
                    name: 'Авто-кликер',
                    desc: 'Хомяк сам кликает 1 раз в секунду',
                    baseCost: 10
                },
                {
                    id: 'doubleClick',
                    name: 'Двойной клик',
                    desc: 'Клики дают в 2 раза больше зерен',
                    baseCost: 50
                },
                {
                    id: 'goldenHamster',
                    name: 'Золотой хомяк',
                    desc: 'Клики дают в 3 раза больше зерен',
                    baseCost: 200
                },
                {
                    id: 'hamsterWheel',
                    name: 'Беговое колесо',
                    desc: 'Авто-кликер работает в 5 раз быстрее',
                    baseCost: 500
                },
                {
                    id: 'hamsterFarm',
                    name: 'Хомячья ферма',
                    desc: 'Все улучшения работают в 2 раза лучше',
                    baseCost: 2000
                }
            ];
            
            upgradeData.forEach(upgrade => {
                const level = upgrades[upgrade.id].level;
                const cost = upgrades[upgrade.id].cost;
                const upgradeDiv = document.createElement('div');
                upgradeDiv.className = grains >= cost ? 'upgrade' : 'upgrade unavailable';
                upgradeDiv.innerHTML = `
                    <div class="upgrade-name">${upgrade.name} [Ур. ${level}]</div>
                    <div class="upgrade-description">${upgrade.desc}</div>
                    <div class="upgrade-price">Цена: ${formatNumber(cost)} зерен</div>
                    <div class="upgrade-owned">Куплено: ${level}</div>
                `;
                
                if (grains >= cost) {
                    upgradeDiv.onclick = () => buyUpgrade(upgrade.id);
                }
                
                upgradesList.appendChild(upgradeDiv);
            });
        }
        
        // Покупка улучшения
        function buyUpgrade(upgradeId) {
            const upgrade = upgrades[upgradeId];
            
            if (grains >= upgrade.cost) {
                grains -= upgrade.cost;
                upgrade.level++;
                
                // Пересчет бонусов
                switch(upgradeId) {
                    case 'autoClicker':
                        grainsPerSecond += 1 * upgrades.hamsterWheel.level * 5;
                        break;
                    case 'doubleClick':
                        grainsPerClick *= 2;
                        break;
                    case 'goldenHamster':
                        grainsPerClick *= 3;
                        break;
                    case 'hamsterWheel':
                        grainsPerSecond = upgrades.autoClicker.level * (5 * upgrade.level);
                        break;
                    case 'hamsterFarm':
                        // Умножаем все существующие бонусы
                        grainsPerClick *= 2;
                        grainsPerSecond *= 2;
                        break;
                }
                
                // Увеличение цены
                upgrade.cost = Math.floor(upgrade.cost * 1.5);
                
                updateDisplay();
                createUpgrades();
                showSaveNotice();
            }
        }
        
        // Автоматический доход
        setInterval(() => {
            grains += grainsPerSecond;
            updateDisplay();
        }, 1000);
        
        // Уведомление о сохранении
        function showSaveNotice() {
            saveNotice.style.opacity = '1';
            setTimeout(() => {
                saveNotice.style.opacity = '0';
            }, 2000);
        }
        
        // Сохранение игры
        function saveGame() {
            const gameData = {
                grains,
                grainsPerClick,
                grainsPerSecond,
                upgrades
            };
            localStorage.setItem('hamsterClickerSave', JSON.stringify(gameData));
            showSaveNotice();
        }
        
        // Загрузка игры
        function loadGame() {
            const saved = localStorage.getItem('hamsterClickerSave');
            if (saved) {
                const gameData = JSON.parse(saved);
                grains = gameData.grains || 0;
                grainsPerClick = gameData.grainsPerClick || 1;
                grainsPerSecond = gameData.grainsPerSecond || 0;
                upgrades = gameData.upgrades || upgrades;
                
                updateDisplay();
                createUpgrades();
            }
        }
        
        // Сброс игры
        function resetGame() {
            if (confirm('Вы уверены? Весь прогресс будет потерян!')) {
                grains = 0;
                grainsPerClick = 1;
                grainsPerSecond = 0;
                upgrades = {
                    autoClicker: { level: 0, cost: 10, multiplier: 1 },
                    doubleClick: { level: 0, cost: 50, multiplier: 2 },
                    goldenHamster: { level: 0, cost: 200, multiplier: 3 },
                    hamsterWheel: { level: 0, cost: 500, multiplier: 5 },
                    hamsterFarm: { level: 0, cost: 2000, multiplier: 10 }
                };
                
                localStorage.removeItem('hamsterClickerSave');
                updateDisplay();
                createUpgrades();
            }
        }
        
        // Кнопки
        saveBtn.addEventListener('click', saveGame);
        resetBtn.addEventListener('click', resetGame);
        
        // Авто-сохранение каждые 30 секунд
        setInterval(saveGame, 30000);
        
        // Инициализация
        loadGame();
        createUpgrades();
        updateDisplay();
        
        // Предотвращение масштабирования на мобильных
        document.addEventListener('touchstart', function(e) {
            if (e.touches.length > 1) {
                e.preventDefault();
            }
        }, { passive: false });
        
        document.addEventListener('gesturestart', function(e) {
            e.preventDefault();
        });
    </script>
</body>
  </html>
