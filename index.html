<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no">
<title>Hamster Style</title>

<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:Arial;touch-action:manipulation}
html,body{
  width:100%;height:100%;
  background:radial-gradient(circle,#1d2550,#080b1a);
  color:#fff;overflow:hidden;user-select:none
}
.app{text-align:center;padding-top:20px}
.coins{font-size:42px;font-weight:bold}
.circle{
  width:260px;height:260px;border-radius:50%;
  margin:20px auto;
  background:radial-gradient(circle,#ffd54f,#ff9800);
  display:flex;align-items:center;justify-content:center
}
.coin{font-size:90px}
.menu{
  position:absolute;bottom:0;width:100%;
  display:flex;justify-content:space-around;
  background:#0c1025;padding:10px
}
.panel{
  position:absolute;inset:0;
  background:#050816;
  display:none;flex-direction:column;
  padding:20px
}
.btn{
  background:#1d2550;padding:12px;
  border-radius:12px;margin-bottom:10px
}
</style>
</head>

<body>

<div class="app">
  <h2>üêπ HAMSTER</h2>
  <div class="coins" id="coins">0</div>
  <div class="circle" id="tap"><div class="coin">ü™ô</div></div>
</div>

<div class="menu">
  <div onclick="openShop()">‚ö° –ú–∞–≥–∞–∑–∏–Ω</div>
</div>

<div class="panel" id="shop">
  <h3>‚ö° –£–ª—É—á—à–µ–Ω–∏—è</h3>
  <div class="btn" onclick="buy(5)">x5</div>
  <div class="btn" onclick="buy(10)">x10</div>
  <div class="btn" onclick="buy(15)">x15</div>
  <div class="btn" onclick="buy(20)">x20</div>
  <div class="btn" onclick="closeShop()">‚ùå –ó–∞–∫—Ä—ã—Ç—å</div>
</div>

<script>
const API = "http://IP:5000"; // ‚Üê –°–Æ–î–ê IP –°–ï–†–í–ï–†–ê
const tg = Telegram.WebApp;
const user_id = tg.initDataUnsafe.user.id;

let coins = 0;

fetch(API+"/get",{
  method:"POST",
  headers:{"Content-Type":"application/json"},
  body:JSON.stringify({user_id})
})
.then(r=>r.json())
.then(d=>{
  coins=d.coins;
  update();
});

function update(){
  document.getElementById("coins").textContent=coins;
}

document.getElementById("tap")
.addEventListener("pointerdown",()=>{
  fetch(API+"/tap",{
    method:"POST",
    headers:{"Content-Type":"application/json"},
    body:JSON.stringify({user_id})
  })
  .then(r=>r.json())
  .then(d=>{
    coins=d.coins;
    update();
  });
});

function buy(x){
  fetch(API+"/buy",{
    method:"POST",
    headers:{"Content-Type":"application/json"},
    body:JSON.stringify({user_id, mult:x})
  })
  .then(r=>r.json())
  .then(d=>{
    if(!d.ok) alert("–ú–∞–ª–æ –º–æ–Ω–µ—Ç");
  });
}

function openShop(){shop.style.display="flex"}
function closeShop(){shop.style.display="none"}
</script>

</body>
</html>
